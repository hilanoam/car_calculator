<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>מחשבון ניכוי רכב</title>

  <!-- Tailwind output (generated by your watch/build) -->
  <link rel="stylesheet" href="./output.css" />

  <meta name="color-scheme" content="light">
</head>

<body class="min-h-screen text-slate-800">
  <!-- Soft glass background -->
  <div class="min-h-screen bg-[radial-gradient(1200px_circle_at_90%_10%,#e9d5ff_0%,transparent_55%),radial-gradient(1000px_circle_at_10%_10%,#dbeafe_0%,transparent_55%),radial-gradient(900px_circle_at_50%_100%,#c7d2fe_0%,transparent_60%)]">
    <div class="px-4 py-6">
      <div class="mx-auto max-w-6xl">

        <!-- Glass shell -->
        <div class="rounded-[28px] border border-white/40 bg-white/40 backdrop-blur-2xl shadow-[0_30px_80px_rgba(31,41,55,0.18)] overflow-hidden">
          <div class="flex">

            <!-- Sidebar (decorative) -->
            <aside class="hidden md:flex w-20 flex-col items-center gap-4 py-6 border-l border-white/30 bg-white/20">
              <div class="h-10 w-10 rounded-2xl bg-gradient-to-br from-indigo-500 to-violet-500 shadow-[0_10px_30px_rgba(99,102,241,.35)]"></div>
              <div class="mt-6 flex flex-col gap-3">
                <div class="h-11 w-11 rounded-2xl bg-white/60 border border-white/40 backdrop-blur-xl shadow-[0_12px_28px_rgba(31,41,55,.12)]"></div>
                <div class="h-11 w-11 rounded-2xl bg-white/25 border border-white/30"></div>
                <div class="h-11 w-11 rounded-2xl bg-white/25 border border-white/30"></div>
                <div class="h-11 w-11 rounded-2xl bg-white/25 border border-white/30"></div>
              </div>
              <div class="mt-auto mb-2 h-11 w-11 rounded-2xl bg-white/25 border border-white/30"></div>
            </aside>

            <!-- Main -->
            <main class="flex-1 p-6 space-y-6">
              <!-- Top bar -->
              <header class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                <div>
                  <div class="text-slate-900 text-xl font-semibold">מחשבון ניכוי נטו בגין רכב</div>
                  <div class="text-slate-600 text-sm">מחשבת כמה “באמת יורד” לך בגלל רכב צמוד</div>
                </div>

                <div class="flex items-center gap-3">
                  <div class="rounded-2xl bg-white/60 border border-white/40 backdrop-blur-xl px-4 py-2.5 text-sm text-slate-700 shadow-[0_12px_28px_rgba(31,41,55,.10)]">
                    ביטוח לאומי: <b>7%</b> · בריאות: <b>5%</b>
                  </div>
                </div>
              </header>

              <!-- Toggle + Quick cards -->
              <section class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                <!-- Toggle card -->
                <div class="rounded-3xl bg-white/65 border border-white/45 backdrop-blur-xl p-5 shadow-[0_22px_50px_rgba(31,41,55,.14)]">
                  <div class="text-sm text-slate-600">האם ההצמדה לפי תקינה?</div>

                  <div class="mt-4 flex items-center gap-3">
                    <button id="btnStandardYes"
                      class="px-4 py-2 rounded-2xl border border-white/50 bg-white/70 hover:bg-white/90 transition shadow-sm text-sm">
                      כן
                    </button>
                    <button id="btnStandardNo"
                      class="px-4 py-2 rounded-2xl border border-white/40 bg-white/30 hover:bg-white/60 transition text-sm">
                      לא
                    </button>

                    <span id="standardHint" class="ms-auto text-xs text-slate-500">בחרי כדי לפתוח 1 או 2 שדות</span>
                  </div>

                  <div class="mt-4 rounded-2xl bg-white/45 border border-white/40 p-4">
                    <div class="text-xs text-slate-500">סה״כ שיעורי ניכוי (מס + ב״ל + בריאות)</div>
                    <div class="mt-1 text-2xl font-semibold text-slate-900">
                      <span id="totalRatePct">—</span>
                    </div>
                    <div class="mt-2 text-xs text-slate-500">
                      מס שולי: <span id="taxPctInline">—</span> · ב״ל: 7% · בריאות: 5%
                    </div>
                  </div>
                </div>

                <!-- Result card (big) -->
                <div class="lg:col-span-2 rounded-[26px] bg-gradient-to-b from-indigo-600 to-violet-600 text-white p-5 shadow-[0_30px_70px_rgba(99,102,241,.35)]">
                  <div class="text-sm opacity-90">סכום הניכוי נטו בגין הרכב</div>

                  <div class="mt-3 rounded-2xl bg-white/15 border border-white/20 p-4 backdrop-blur-xl">
                    <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3">
                      <div>
                        <div class="text-xs opacity-90">תוצאה סופית</div>
                        <div class="mt-1 text-3xl font-semibold">
                          ₪ <span id="finalValue">0.00</span>
                        </div>
                        <div class="mt-2 text-xs opacity-90">
                          נוסחה: (זקיפת הטבה × R) − (תוספת איזון × (1−R))
                        </div>
                      </div>

                      <div class="rounded-2xl bg-white/10 border border-white/20 p-3 text-sm">
                        <div class="flex justify-between gap-6">
                          <span class="opacity-90">עלות שדה 1</span>
                          <b>₪ <span id="cost1Value">0.00</span></b>
                        </div>
                        <div class="flex justify-between gap-6 mt-1">
                          <span class="opacity-90">נטו שדה 2</span>
                          <b>₪ <span id="net2Value">0.00</span></b>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="mt-4 grid grid-cols-1 sm:grid-cols-3 gap-3">
                    <div class="rounded-2xl bg-white/10 border border-white/20 p-3">
                      <div class="text-xs opacity-90">זקיפת הטבה (B)</div>
                      <div class="text-lg font-semibold">₪ <span id="benefitInline">0</span></div>
                    </div>
                    <div class="rounded-2xl bg-white/10 border border-white/20 p-3">
                      <div class="text-xs opacity-90">תוספת איזון (A)</div>
                      <div class="text-lg font-semibold">₪ <span id="allowanceInline">0</span></div>
                    </div>
                    <div class="rounded-2xl bg-white/10 border border-white/20 p-3">
                      <div class="text-xs opacity-90">R</div>
                      <div class="text-lg font-semibold"><span id="rInline">—</span></div>
                    </div>
                  </div>
                </div>
              </section>

              <!-- Forms -->
              <section class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                <!-- Field 1 -->
                <div class="rounded-[26px] bg-white/55 border border-white/45 backdrop-blur-2xl p-5 shadow-[0_22px_50px_rgba(31,41,55,.12)]">
                  <div class="flex items-center justify-between">
                    <div>
                      <div class="text-slate-900 font-semibold">שדה 1 · זקיפת הטבה לרכב</div>
                      <div class="text-xs text-slate-500 mt-1">בחרי קטגוריית רכב או הזיני סכום ידני</div>
                    </div>
                  </div>

                  <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3">
                    <label class="block">
                      <span class="text-xs text-slate-600">קטגוריית רכב</span>
                      <select id="carType"
                        class="mt-1 w-full rounded-2xl bg-white/60 border border-white/45 backdrop-blur-xl px-4 py-2.5 text-sm shadow-[0_12px_28px_rgba(31,41,55,.08)] focus:outline-none focus:ring-2 focus:ring-indigo-300">
                        <option value="small">רכב קטן (₪ 3,200)</option>
                        <option value="medium">רכב בינוני (₪ 4,100)</option>
                        <option value="large">רכב גדול (₪ 5,200)</option>
                      </select>
                    </label>

                    <label class="block">
                      <span class="text-xs text-slate-600">או הזנה ידנית (₪)</span>
                      <input id="benefitManual" type="number" inputmode="decimal" min="0" step="0.01"
                        placeholder="למשל 500"
                        class="mt-1 w-full rounded-2xl bg-white/60 border border-white/45 backdrop-blur-xl px-4 py-2.5 text-sm shadow-[0_12px_28px_rgba(31,41,55,.08)] focus:outline-none focus:ring-2 focus:ring-indigo-300" />
                      <div class="mt-1 text-[11px] text-slate-500">אם מילאת כאן — זה יגבר על בחירת הרכב</div>
                    </label>
                  </div>

                  <div class="mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3">
                    <label class="block">
                      <span class="text-xs text-slate-600">אחוז מס שולי</span>
                      <select id="taxPct"
                        class="mt-1 w-full rounded-2xl bg-white/60 border border-white/45 backdrop-blur-xl px-4 py-2.5 text-sm shadow-[0_12px_28px_rgba(31,41,55,.08)] focus:outline-none focus:ring-2 focus:ring-indigo-300">
                        <option value="10">10%</option>
                        <option value="14">14%</option>
                        <option value="20">20%</option>
                        <option value="31">31%</option>
                        <option value="35" selected>35%</option>
                        <option value="47">47%</option>
                        <option value="50">50%</option>
                      </select>
                    </label>

                    <div class="rounded-2xl bg-white/45 border border-white/40 p-4">
                      <div class="text-xs text-slate-500">פירוט ניכוי על שדה 1</div>
                      <div class="mt-2 space-y-1 text-sm">
                        <div class="flex justify-between"><span>מס שולי</span><b>₪ <span id="taxOnBenefit">0.00</span></b></div>
                        <div class="flex justify-between"><span>ביטוח לאומי (7%)</span><b>₪ <span id="nOnBenefit">0.00</span></b></div>
                        <div class="flex justify-between"><span>בריאות (5%)</span><b>₪ <span id="hOnBenefit">0.00</span></b></div>
                        <div class="pt-2 mt-2 border-t border-white/40 flex justify-between text-slate-900">
                          <span class="font-semibold">סה״כ שדה 1</span>
                          <span class="font-semibold">₪ <span id="sumBenefit">0.00</span></span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Field 2 (conditional) -->
                <div id="field2Card" class="rounded-[26px] bg-white/55 border border-white/45 backdrop-blur-2xl p-5 shadow-[0_22px_50px_rgba(31,41,55,.12)]">
                  <div class="text-slate-900 font-semibold">שדה 2 · תוספת איזון</div>
                  <div class="text-xs text-slate-500 mt-1">מופיע רק אם בחרת “כן” בתקינה</div>

                  <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3">
                    <label class="block">
                      <span class="text-xs text-slate-600">תוספת איזון (₪)</span>
                      <input id="allowance" type="number" inputmode="decimal" min="0" step="0.01"
                        placeholder="למשל 355"
                        class="mt-1 w-full rounded-2xl bg-white/60 border border-white/45 backdrop-blur-xl px-4 py-2.5 text-sm shadow-[0_12px_28px_rgba(31,41,55,.08)] focus:outline-none focus:ring-2 focus:ring-indigo-300" />
                    </label>

                    <div class="rounded-2xl bg-white/45 border border-white/40 p-4">
                      <div class="text-xs text-slate-500">פירוט ניכוי על שדה 2 (אותם אחוזים)</div>
                      <div class="mt-2 space-y-1 text-sm">
                        <div class="flex justify-between"><span>מס שולי (<span id="taxPct2">—</span>)</span><b>₪ <span id="taxOnAllowance">0.00</span></b></div>
                        <div class="flex justify-between"><span>ביטוח לאומי (7%)</span><b>₪ <span id="nOnAllowance">0.00</span></b></div>
                        <div class="flex justify-between"><span>בריאות (5%)</span><b>₪ <span id="hOnAllowance">0.00</span></b></div>
                        <div class="pt-2 mt-2 border-t border-white/40 flex justify-between text-slate-900">
                          <span class="font-semibold">נטו שדה 2</span>
                          <span class="font-semibold">₪ <span id="netAllowance">0.00</span></span>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="mt-3 text-[11px] text-slate-500">
                    נטו שדה 2 = תוספת איזון × (1 − R)
                  </div>
                </div>
              </section>

              <!-- Footer hint -->
              <footer class="text-xs text-slate-500 pb-2">
                טיפ: כדי לבדוק כמו בדוגמה שלך, הזיני זקיפת הטבה 500, מס שולי 35%, תוספת איזון 355 → תקבלי 46.85
              </footer>

            </main>
          </div>
        </div>

      </div>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
