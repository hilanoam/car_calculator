<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>מחשבון ניכוי רכב</title>
  <link rel="stylesheet" href="./output.css" />
  <meta name="color-scheme" content="light">
</head>

<body class="min-h-screen text-slate-800">
  <div class="min-h-screen bg-[radial-gradient(1200px_circle_at_90%_10%,#e9d5ff_0%,transparent_55%),radial-gradient(1000px_circle_at_10%_10%,#dbeafe_0%,transparent_55%),radial-gradient(900px_circle_at_50%_100%,#c7d2fe_0%,transparent_60%)]">
    <div class="px-4 py-6">
      <div class="mx-auto max-w-6xl">

        <div class="rounded-[28px] border border-white/40 bg-white/40 backdrop-blur-2xl shadow-[0_30px_80px_rgba(31,41,55,0.18)] overflow-hidden">
          <div class="flex">
            <main class="flex-1 p-6 space-y-6">

              <!-- Header -->
              <header class="space-y-2 text-center mx-auto">
                <div class="text-slate-900 text-xl font-semibold">
                  סימולטור אומדן שווי שימוש ברכב
                </div>

                <p class="text-sm text-slate-600 max-w-2xl leading-relaxed">
                  בלה בלה בלה טקסט של מלי
                </p>
              </header>

              <!-- Toggle ONLY (always visible) -->
              <section class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                <div class="rounded-3xl bg-white/65 border border-white/45 backdrop-blur-xl p-5 shadow-[0_22px_50px_rgba(31,41,55,.14)]">
                  <div class="text-sm text-slate-600">האם ההצמדה לפי תקינה?</div>

                  <div class="mt-4 flex items-center gap-3">
                    <button id="btnStandardYes"
                      class="px-4 py-2 rounded-2xl border border-white/50 bg-white/70 hover:bg-white/90 transition shadow-sm text-sm">
                      כן
                    </button>

                    <button id="btnStandardNo"
                      class="px-4 py-2 rounded-2xl border border-white/40 bg-white/30 hover:bg-white/60 transition text-sm">
                      לא
                    </button>
                  </div>
                </div>
              </section>

              <!-- Dynamic cards (hidden until choose yes/no) -->
              <div id="dynamicCards" class="hidden space-y-6">

                <!-- IMPORTANT: all cards in same grid so we can swap sides -->
                <section id="cardsGrid" class="grid grid-cols-1 lg:grid-cols-2 gap-4">

                  
                  <!-- Benefit (always in dynamic mode) -->
                  <div id="benefitCard" class="rounded-[26px] bg-white/55 border border-white/45 backdrop-blur-2xl p-5 shadow-[0_22px_50px_rgba(31,41,55,.12)]">
                    <div class="flex items-center justify-between">
                      <div>
                        <div class="text-slate-900 font-semibold">זקיפת הטבה לרכב</div>
                        <div class="text-xs text-slate-500 mt-1">בחר קטגוריית רכב או הזן סכום ידני</div>
                      </div>
                    </div>

                    <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3">
                      <label class="block">
                        <span class="text-xs text-slate-600">קטגוריית רכב</span>
                        <select id="carType"
                          class="mt-1 w-full rounded-2xl bg-white/60 border border-white/45 backdrop-blur-xl px-4 py-2.5 text-sm shadow-[0_12px_28px_rgba(31,41,55,.08)] focus:outline-none focus:ring-2 focus:ring-indigo-300">
                          <option value="" selected disabled>בחר סוג רכב…</option>
                          <option value="small">רכב קטן (₪ 3,200)</option>
                          <option value="medium">רכב בינוני (₪ 4,100)</option>
                          <option value="large">רכב גדול (₪ 5,200)</option>
                        </select>
                      </label>

                      <label class="block">
                        <span class="text-xs text-slate-600">או הזן סכום (₪)</span>
                        <input id="benefitManual" type="number" inputmode="decimal" min="0" step="0.01"
                          class="mt-1 w-full rounded-2xl bg-white/60 border border-white/45 backdrop-blur-xl px-4 py-2.5 text-sm shadow-[0_12px_28px_rgba(31,41,55,.08)] focus:outline-none focus:ring-2 focus:ring-indigo-300" />
                      </label>
                    </div>

                    <div class="mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3">
                      <label class="block">
                        <span class="text-xs text-slate-600">אחוז מס שולי</span>
                        <select id="taxPct"
                          class="mt-1 w-full rounded-2xl bg-white/60 border border-white/45 backdrop-blur-xl px-4 py-2.5 text-sm shadow-[0_12px_28px_rgba(31,41,55,.08)] focus:outline-none focus:ring-2 focus:ring-indigo-300">
                          <option value="" selected disabled>בחר אחוז מס שולי…</option>
                          <option value="10">10%</option>
                          <option value="14">14%</option>
                          <option value="20">20%</option>
                          <option value="31">31%</option>
                          <option value="35">35%</option>
                          <option value="47">47%</option>
                          <option value="50">50%</option>
                        </select>
                      </label>

                      <div class="rounded-2xl bg-white/45 border border-white/40 p-4">
                        <div class="text-xs text-slate-500">פירוט ניכוי על זקיפת הטבת רכב</div>
                        <div class="mt-2 space-y-1 text-sm">
                          <div class="flex justify-between"><span>מס שולי</span><b>₪ <span id="taxOnBenefit">0.00</span></b></div>
                          <div class="flex justify-between"><span>ביטוח לאומי (7%)</span><b>₪ <span id="nOnBenefit">0.00</span></b></div>
                          <div class="flex justify-between"><span>בריאות (5%)</span><b>₪ <span id="hOnBenefit">0.00</span></b></div>
                          <div class="pt-2 mt-2 border-t border-white/40 flex justify-between text-slate-900">
                            <span class="font-semibold">סה״כ חיוב על זקיפת הטבת רכב</span>
                            <span class="font-semibold">₪ <span id="sumBenefit">0.00</span></span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Dates (only when NOT standard) -->
                  <div id="datesCard" class="hidden rounded-[26px] bg-white/55 border border-white/45 backdrop-blur-2xl p-5 shadow-[0_22px_50px_rgba(31,41,55,.12)]">
                    <div class="text-slate-900 font-semibold">שימוש בפועל ברכב</div>
                    <div class="text-xs text-slate-500 mt-1">הזן תאריכים כדי לחשב חיוב יחסי לפי ימים</div>

                    <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3">
                      <label class="block">
                        <span class="text-xs text-slate-600">תאריך התחלה</span>
                        <input id="startDate" type="date"
                          class="mt-1 w-full rounded-2xl bg-white/60 border border-white/45 backdrop-blur-xl px-4 py-2.5 text-sm shadow-[0_12px_28px_rgba(31,41,55,.08)] focus:outline-none focus:ring-2 focus:ring-indigo-300" />
                      </label>

                      <label class="block">
                        <span class="text-xs text-slate-600">תאריך סיום</span>
                        <input id="endDate" type="date"
                          class="mt-1 w-full rounded-2xl bg-white/60 border border-white/45 backdrop-blur-xl px-4 py-2.5 text-sm shadow-[0_12px_28px_rgba(31,41,55,.08)] focus:outline-none focus:ring-2 focus:ring-indigo-300" />
                      </label>
                    </div>

                    <div class="mt-3 rounded-2xl bg-white/45 border border-white/40 p-4">
                      <div class="text-xs text-slate-500">סיכום חישוב</div>

                      <div class="mt-2 space-y-1 text-sm">
                        <div class="flex justify-between"><span>ימים בחודש</span><b><span id="daysInMonth">—</span></b></div>
                        <div class="flex justify-between"><span>ימים בשימוש</span><b><span id="daysUsed">—</span></b></div>

                        <div class="pt-2 mt-2 border-t border-white/40 flex justify-between text-slate-900">
                          <span class="font-semibold">תשלום יחסי לפי ימים</span>
                          <span class="font-semibold">₪ <span id="proratedCost">0.00</span></span>
                        </div>
                      </div>

                      <div id="dateError" class="mt-2 text-xs text-rose-600 hidden"></div>
                    </div>
                  </div>

                  <!-- Allowance (only when standard YES) -->
                  <div id="field2Card" class="rounded-[26px] bg-white/55 border border-white/45 backdrop-blur-2xl p-5 shadow-[0_22px_50px_rgba(31,41,55,.12)]">
                    <div class="text-slate-900 font-semibold">תוספת איזון</div>

                    <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3">
                      <label class="block">
                        <span class="text-xs text-slate-600">תוספת איזון (₪)</span>
                        <input id="allowance" type="number" inputmode="decimal" min="0" step="0.01"
                          class="mt-1 w-full rounded-2xl bg-white/60 border border-white/45 backdrop-blur-xl px-4 py-2.5 text-sm shadow-[0_12px_28px_rgba(31,41,55,.08)] focus:outline-none focus:ring-2 focus:ring-indigo-300" />
                      </label>

                      <div class="rounded-2xl bg-white/45 border border-white/40 p-4">
                        <div class="text-xs text-slate-500">פירוט ניכוי על תוספת איזון</div>
                        <div class="mt-2 space-y-1 text-sm">
                          <div class="flex justify-between"><span>מס שולי (<span id="taxPct2">—</span>)</span><b>₪ <span id="taxOnAllowance">0.00</span></b></div>
                          <div class="flex justify-between"><span>ביטוח לאומי (7%)</span><b>₪ <span id="nOnAllowance">0.00</span></b></div>
                          <div class="flex justify-between"><span>בריאות (5%)</span><b>₪ <span id="hOnAllowance">0.00</span></b></div>
                          <div class="pt-2 mt-2 border-t border-white/40 flex justify-between text-slate-900">
                            <span class="font-semibold">סה"כ תוספת איזון נטו</span>
                            <span class="font-semibold">₪ <span id="netAllowance">0.00</span></span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                </section>

                <!-- Result (always after choosing) -->
                <section class="rounded-[26px] bg-gradient-to-b from-indigo-600 to-violet-600 text-white p-5 shadow-[0_30px_70px_rgba(99,102,241,.35)]">
                  <div class="text-sm opacity-90">סכום הניכוי נטו בגין הרכב</div>

                  <div class="mt-3 rounded-2xl bg-white/15 border border-white/20 p-4 backdrop-blur-xl">
                    <div class="text-xs opacity-90">תוצאה סופית</div>
                    <div class="mt-1 text-3xl font-semibold">
                      ₪ <span id="finalValue">0.00</span>
                    </div>
                  </div>
                </section>

              </div>
            </main>
          </div>
        </div>

      </div>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
